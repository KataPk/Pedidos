<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="/fontawesome-free-6.4.0-web/js/all.js"> </script>

    <link href="/css/navbar.css" rel="stylesheet">
    <link href="/css/funcionario.css" rel="stylesheet">
    <script src="/js/navbar.js"></script>

    <title>Funcionários</title>
</head>
<body>
<div th:insert="~{User/navbar}"></div>

<div class="container">

    <div class="row align-items-start text-center" id="FuncionarioContainer">
<!-- criar card para criação de usuário-->
        <div class="card text-center">
            <button class="btn imageBtn addMesa" data-bs-target="#criarUsuario" data-bs-toggle="modal" type="button">
                <img alt="..." class="card-img-top image" id="mesaAddImage" src="/img/PNG/add_button.png">
            </button>
            <div class="card-body">
                <button class="btn btn-primary createMesa" data-bs-target="#criarUsuario" data-bs-toggle="modal"
                        id="createMesa" type="button">
                    Cadastrar Funcionário
                </button>
            </div>
        </div>



    <th:block th:each="user : ${users}">

        <div th:if="${user.statusUsuario == 'ATIVO'}" class="card text-center" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title" th:text="${user.nome}">Card title</h5>
                <h6 class="card-subtitle mb-2 text-body-secondary" th:if="${user.roles.contains(RoleAdmin)}"  >Nível de acesso: Administrador</h6>
                <h6 class="card-subtitle mb-2 text-body-secondary" th:if="${user.roles.contains(RoleUser)}">Nível de acesso: Usuário</h6>

                <p class="card-text" th:text="'Username: ' + ${user.username}">Username</p>
                <p class="card-text" th:text="'Email de recuperação: ' + ${user.email}">Email</p>

                <div class="align-items-start">

                <button  class="btn btn-primary">Editar Funcionário</button>
                <button sec:authorize="principal.getUsername() != user.username()"  class="btn btn-danger">Excluir Funcionário</button>
                </div>
            </div>
        </div>
    </th:block>
    </div>

</div>
        <div id="modals">
            <div  class="modal fade" id="criarUsuario" aria-labelledby="staticBackdropLabel">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5">Criar Usuário</h1>
                            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                        </div>
                        <form action="/api/admin/createUsuario" method="POST">
                            <div class="modal-body vstack">
                                <div class="hstack p-1">
                                    <label class="form-label" for="nomeUsuario">Nome:</label>
                                    <input class="form-control" id="nomeUsuario" name="nome" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="cpfUsuario">CPF:</label>
                                    <input class="form-control" id="cpfUsuario" name="cpf" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="rgUsuario">RG:</label>
                                    <input class="form-control" id="rgUsuario" name="rg" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="dataNascUsuario">Data de Nascimento: </label>
                                    <input class="form-control" id="dataNascUsuario" name="dataNasc" required type="date">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="enderecoUsuario">Endereço: </label>
                                    <input class="form-control" id="enderecoUsuario" name="endereco" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="numResidUsuario">Número: </label>
                                    <input class="form-control" id="numResidUsuario" name="numResid" required type="number">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="complementoUsuario">Endereço: </label>
                                    <input class="form-control" id="complementoUsuario" name="complemento" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="complementoUsuario">Endereço: </label>
                                    <input class="form-control" id="complementoUsuario" name="complemento" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="complementoUsuario">Endereço: </label>
                                    <input class="form-control" id="complementoUsuario" name="complemento" required type="text">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="emailUsuario">Email: </label>
                                    <input class="form-control" id="emailUsuario" name="email" required type="email">
                                </div>
                                <div class="hstack p-1">
                                    <label class="form-label" for="senhaUsuario">Senha: </label>
                                    <input class="form-control" id="senhaUsuario" name="senha" required type="password">
                                </div>
                                <!-- Outros campos de usuário, se necessário -->
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" type="submit">Criar</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
</body>
</html>